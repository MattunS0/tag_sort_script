# ファイル整理ツール

このツールは、指定されたディレクトリ内のファイルを、ファイル名に含まれるタグに基づいて整理するPythonスクリプト群です。また、整理処理の取り消しや、タグの管理、JSONファイルの管理などの機能も提供します。

## 使い方

1.  **初期設定**:  
    最初にスクリプトを実行すると、`config_manager.py` によって設定が行われます。ベースとなるパスや各種ディレクトリのパスを入力し、設定ファイル (`cache_path.json`) が作成されます。設定モードは2種類あり、規定値を使用するか、自分でパスを設定するかを選択できます。

2.  **実行**:  
    `main.py` を実行すると、モード選択画面が表示されます。

3.  **モード選択**:  
    指示に従い、実行したい機能の番号を入力します。

4.  **各機能の操作**:  
    各機能のCLI上で、指示に従って操作を行います。

## 機能

1.  **ファイル整理（sort）**:  
    指定されたディレクトリ内のファイルを、ファイル名に含まれるタグに基づいてディレクトリに整理します。タグはファイル名に `_` 区切りで含める必要があります（例：`file_tag1_tag2.txt`）。

2.  **元に戻す（restore）**:  
    過去のファイル整理処理を元に戻す機能を提供します。
    -   1ソート分戻す: 直前の1回のソート処理を元に戻します。
    -   1ステップ戻す: 直前の1ファイルの移動を元に戻します。

3.  **タグの管理 (tags\_management)**:  
    タグの一覧表示、追加、削除を行うことができます。タグは `tags.txt` ファイルで管理されます。

4.  **JSON管理 (JSON\_management)**:  
    処理履歴を記録するJSONファイルの生成、削除を行います。

## 構成

-   `main.py`: エントリポイントとなるスクリプト。設定の初期化とルートCLIの起動を行います。
-   `clis/jsonCLI.py`: JSONファイルの生成や削除を行うCLIを提供します。
-   `clis/restoreCLI.py`: ファイルのリストア（復元）機能のCLIを提供します。
-   `clis/rootCLI.py`: メインのCLIで、各種機能へのアクセスポイントとなります。
-   `clis/tagCLI.py`: タグの管理を行うCLIを提供します。
-   `sorter/remove_dir.py`: ディレクトリを削除する機能を提供します。
-   `sorter/restore.py`: ファイルのリストア処理の実装を提供します。
-   `sorter/sorter.py`: ファイルのソート（整理）処理の実装を提供します。
-   `sorter/tag_manager.py`: タグの管理機能の実装を提供します。
-   `utils/config_manager.py`: 設定ファイルの初期化やパス設定などを扱う。
-   `utils/history_manager.py`: 処理履歴をJSONファイルで管理する機能を提供する。
-   `utils/logger.py`: ログ出力機能を提供する。

## 注意事項

-   タグはファイル名に `_` 区切りで含める必要があります。
-   タグは `tags.txt` ファイルにあらかじめ登録されている必要があります。
-   エラーが発生した場合、ログファイル (`Errorlogdir` に日付毎に作成される `YYYYMMDD_Errorlog.txt`) に記録されます。

## 必要なライブラリ

-   `os`
-   `sys`
-   `json`
-   `shutil`
-   `datetime`
-   `re`

## 動作環境

-   Python 3.11.9
-   動作確認済み:
    -   Linux
    -   Windows 11

## 補足

このREADMEは、提供されたPythonスクリプト群に基づいて作成されました。各スクリプト内のコメントや変数名なども参考に、より詳細な説明を心がけました。特に、CLI関連のスクリプト (`jsonCLI.py`、`restoreCLI.py`、`rootCLI.py`、`tagCLI.py`) は `clis` フォルダに、（`remove_dir.py`、`restore.py`、`sorter.py`、`tag_manager.py`） は `sorter` フォルダに、(`history_manager.py`、`config_manager.py`、`logger.py`)は`utils`フォルダ存在することに注意してください。